# 项目说明：面向低空作业的无人设备安全系统

## 1. 项目定位
本项目用于探索“面向低空作业的无人设备安全系统”的原型实现与验证，包含：
- 地图交互原型（任务创建、起降点选择、区域绘制）
- 无人机线路规划的早期版本（待优化）
- 网页 + AI 交互的早期接入尝试

本目录之所以包含多个子目录，是因为在推进过程中尝试了不同实现路线，以便保留对比而不互相干扰。

## 2. 当前状态
- 这是一个“多原型集合”的项目目录：更偏实验/验证性质，而非统一工程化交付。
- Python 环境信息见下方文档索引。

## 3. 目录结构速览（关键内容）
- `PoeAPI.py`：Poe/LLM 对话的 Python 脚本（已改为通过环境变量读取密钥）。
- `python_environment.md`：当时的 Python/conda 环境记录。
- `未添加AI的html/`：仅前端地图原型（含高德/Leaflet 版本）。
- `无人机线路规划（待优化）/`：前端页面 + Python 服务的线路规划尝试。
- `已完成网页与ai/`：前端页面 + Python 服务 + AI 响应的尝试（保留了 response.txt 结果样例）。

## 4. 快速运行（Windows）
> 说明：这些子目录的运行方式并不完全一致，优先以各目录下的 `run.bat` 为准。

### 4.1 运行 Poe/LLM 对话脚本（PoeAPI.py）
1) 设置环境变量：
- PowerShell：`$env:POE_API_KEY = "你的key"`
- CMD：`set POE_API_KEY=你的key`

2) 安装依赖（若未安装）：
- 需要 `fastapi_poe`（具体安装方式依你当前 Python 环境而定）

3) 运行：
- `python PoeAPI.py`

### 4.2 地图原型（未添加AI的html）
- 直接用浏览器打开 `未添加AI的html/高德.html` 或 `未添加AI的html/leaflet.html`。

### 4.3 线路规划（待优化）
- 运行 `无人机线路规划（待优化）/run.bat`（如需先安装依赖，请按报错提示安装）。

### 4.4 网页 + AI（已完成网页与ai）
- 运行 `已完成网页与ai/run.bat`。
- AI 密钥通过环境变量 `POE_API_KEY` 提供。

## 5. 配置与密钥（统一方案）
- 已移除所有硬编码密钥。
- 统一从环境变量读取：`POE_API_KEY`
- 若未设置，将给出明确报错提示。

便捷设置示例：
- PowerShell：运行 [set_env.example.ps1](set_env.example.ps1)
- CMD：运行 [set_env.example.cmd](set_env.example.cmd)

## 6. 输出与数据
- `已完成网页与ai/response.txt`：保留的一份 AI 响应样例/记录（非运行时缓存）。

## 7. 文档索引
- [python_environment.md](python_environment.md)：记录 Python 版本、conda/包列表、当时的目录结构。
- [未添加AI的html/readme.md](未添加AI的html/readme.md)：详细的页面交互结构图与功能清单。

## 8. 演进线索（便于回忆）
- 先做地图交互原型（不接 AI）→ 再尝试“线路规划服务”→ 再尝试“网页接入 AI”。
- 同一想法的不同实现方式被保留在不同子目录中。

## 9. 已知问题与待改进
- 各子目录的依赖与启动方式不统一（建议后续收敛为统一的 requirements / 启动脚本）。
- 如需长期维护，建议把“地图原型/规划服务/AI 服务”拆为更清晰的子项目或统一成一个工程结构。
